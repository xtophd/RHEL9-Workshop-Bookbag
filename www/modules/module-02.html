<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Managing an Application from GitHub :: Definitive RHEL9 Workshop (v9.1)</title>
    <meta name="generator" content="Antora 3.1.7">
    <link rel="stylesheet" href="../_/css/site.css">
<link rel="icon" href="../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img
          src="../_/img/header_logo.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" href="..">Definitive RHEL9 Workshop (v9.1)</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Books</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">CheatSheets</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">CheatSheet A</a>
            <a class="navbar-item" href="#">CheatSheet B</a>
            <a class="navbar-item" href="#">CheatSheet C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Upcoming Events</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Event A</a>
            <a class="navbar-item" href="#">Event B</a>
            <a class="navbar-item" href="#">Event C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Tutorial A</a>
            <a class="navbar-item" href="#">Tutorial B</a>
            <a class="navbar-item" href="#">Tutorial C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="modules" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html" class=" query-params-link">Default Title</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="overview.html">Workshop Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="documentation/webconsole.html">Web Console (cockpit)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="documentation/systemd.html">Service Management (systemd)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="documentation/firewalld.html">Firewall Management (firewalld)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="documentation/nftables.html">Firewall Rules (nf-tables)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="documentation/ebpf.html">eBPF Tracing (bcc-tools)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="documentation/podman.html">Containers Management (podman)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="documentation/buildah.html">Containers Dev (buildah)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="documentation/image-builder.html">Image Builder (composer-cli)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="documentation/virtualization.html">Virtualization (kvm,libvirt)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="documentation/tlog.html">Session Logging (tlog)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="documentation/lvm-vdo.html">Data Optimization (lvm,vdo)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="documentation/stratis.html">Storage Management (stratis)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="documentation/kpatch.html">Kernel Live Patching (kpatch)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="documentation/boom-kernel-parms.html">Managing GRUB2 with Boom</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="documentation/leapp.html">LEAPP In-Place Upgrades</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Default Title</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Default Title</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="connection.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Default Title</a></li>
    <li><a href="module-02.html">Managing an Application from GitHub</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///Users/jmaltin/Development/RHEL9-Workshop-Showroom/content/modules/ROOT/pages/module-02.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Managing an Application from GitHub</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In the first half of this workshop, we packaged an application into this portable container format manually using rpms.
In the second half, we will consider that you may want to manage software from GitHub or some kind of software versioning application.
Rather than installing rpms, we have individual software files and pull them out of that version control into a group of systems.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_install_rhel_8_ubi"><a class="anchor" href="#_install_rhel_8_ubi"></a>Install RHEL 8 UBI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this lab, we will be using a different Red Hat Enterprise Linux version in my container.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Verify the host system release</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cat /etc/redhat-release</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>bastion</code> system is Red Hat Enterprise Linux 9, and when you built the previous container, you used the UBI9 image. This means both the image and the container were built off the same Red Hat Enterprise Linux packages.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>As we did previously in this lab, Use <code>buildah from</code> to pull down the Red Hat Enterprise Linux 8 UBI.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">buildah from registry.access.redhat.com/ubi8/ubi</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Because you already pulled one image named <code>ubi-working-container</code> this one is called <code>ubi-working-container-1</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Install Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that you have a working container, you will use the same process as before installing all the prerequisites, changing config files, and manipulating the contents of this container to be in the desired state.</p>
</div>
<div class="paragraph">
<p>The software you will install is a JavaScript-based game that runs on a web browser. As before in the lab, use dnf to install software inside the container.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use <code>buildah run</code> and install Apache (<code>httpd</code>) into the <code>ubi-working-container-1</code> container.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">buildah run ubi-working-container-1 -- dnf -y install httpd</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_enable_service"><a class="anchor" href="#_enable_service"></a>Enable Service</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The next thing to do is to use a systemctl to enable the service. The ubi-init provides full systemd service to the container.
This will start up any of the services that are enabled.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Enable the <code>httpd</code> service using <code>buildah run</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">buildah run ubi-working-container-1 -- systemctl enable httpd</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The UBI standard image doesn&#8217;t have systemd installed on it by default. The <code>ubi-init</code> container image does include systemd. Plan accordingly to which image you use to build applications.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_explore_source_materials"><a class="anchor" href="#_explore_source_materials"></a>Explore Source Materials</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A GitHub repository has already been synchronized to <code>/home/devops/clumsy-bird/</code> This repository contains the configurations for your application.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Verify the repository is cloned inside the <code>/home/devops/</code> directory</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cd /home/devops/</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git clone https://github.com/ellisonleao/clumsy-bird</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The output states that the software has already been checked out.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Explore the JavaScript contents, index files, and everything else that we need for this web-based JavaScript software.</p>
<div class="listingblock execute">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">ls clumsy-bird</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_add_source_materials_to_container"><a class="anchor" href="#_add_source_materials_to_container"></a>Add Source Materials to Container</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Now that you have verified the source materials exist, you will put the software inside of my container image using the <code>buildah copy</code> command.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">buildah copy ubi-working-container-1 clumsy-bird /var/www/html</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="container"><a class="anchor" href="#container"></a>Enable Container in Background</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the previous section of this lab, you ran the game natively through interactive mode. Because you are now building a web application you will need to run the container in the background and access it through a web address.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Execute <code>buildah config</code> to specify a port and initialize the container.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">buildah config --port 80 --cmd "/usr/sbin/init" ubi-working-container-1</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The command makes a configuration change to this container. I&#8217;m configuring this container to accept connections to its port 80. When the container starts up, it should run the init command, which, in this case, is going to be the Apache daemon right from earlier when I enabled it.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_commit_container_and_deploy"><a class="anchor" href="#_commit_container_and_deploy"></a>Commit Container and Deploy</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Now that we have a container in a working configured state, it is time to make that permanent by committing it to a container image called <code>clumsy-bird</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">buildah commit ubi-working-container-1 clumsy-bird</code></pre>
</div>
</div>
</li>
<li>
<p>Verify that the image was created with <code>podman</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">podman images</code></pre>
</div>
</div>
</li>
<li>
<p>Run the container Now it&#8217;s time to run the container.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">podman run -d -p 8500:80 clumsy-bird</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_verify_application"><a class="anchor" href="#_verify_application"></a>Verify Application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Verify that the application is running by navigating to</p>
</div>
<div class="paragraph">
<p><a href="http://bastion.my-guid.example.opentlc.com:8500" class="bare">http://bastion.my-guid.example.opentlc.com:8500</a></p>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
