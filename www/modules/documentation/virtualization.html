<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Definitive RHEL9 Workshop (v9.1)</title>
    <link rel="prev" href="image-builder.html">
    <link rel="next" href="tlog.html">
    <meta name="generator" content="Antora 3.1.7">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img
          src="../../_/img/header_logo.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" href="../..">Definitive RHEL9 Workshop (v9.1)</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Books</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">CheatSheets</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">CheatSheet A</a>
            <a class="navbar-item" href="#">CheatSheet B</a>
            <a class="navbar-item" href="#">CheatSheet C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Upcoming Events</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Event A</a>
            <a class="navbar-item" href="#">Event B</a>
            <a class="navbar-item" href="#">Event C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Tutorial A</a>
            <a class="navbar-item" href="#">Tutorial B</a>
            <a class="navbar-item" href="#">Tutorial C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="modules" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html" class=" query-params-link">Default Title</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../overview.html">Workshop Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="webconsole.html">Web Console (cockpit)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="systemd.html">Service Management (systemd)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="firewalld.html">Firewall Management (firewalld)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="nftables.html">Firewall Rules (nf-tables)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ebpf.html">eBPF Tracing (bcc-tools)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="podman.html">Containers Management (podman)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="buildah.html">Containers Dev (buildah)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="image-builder.html">Image Builder (composer-cli)</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="virtualization.html">Virtualization (kvm,libvirt)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tlog.html">Session Logging (tlog)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="lvm-vdo.html">Data Optimization (lvm,vdo)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="stratis.html">Storage Management (stratis)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="kpatch.html">Kernel Live Patching (kpatch)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="boom-kernel-parms.html">Managing GRUB2 with Boom</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="leapp.html">LEAPP In-Place Upgrades</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Default Title</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Default Title</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../connection.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Default Title</a></li>
    <li><a href="virtualization.html">Virtualization (kvm,libvirt)</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///Users/jmaltin/Development/RHEL9-Workshop-Showroom/content/modules/ROOT/pages/documentation/virtualization.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<div class="sect1">
<h2 id="_virtualization_management"><a class="anchor" href="#_virtualization_management"></a>Virtualization Management</h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This exercise depends on the work created by the ImageBuilder unit.
If you have not completed that work, please do so before proceeding.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Provided your hardware is reasonably modern, chances are that it supports virtualization.  This unit introduces simple virtualization management using kvm and libvirt.  You will learn how to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Install additional necessary software</p>
</li>
<li>
<p>Enable necessary system services and firewall ports</p>
</li>
<li>
<p>Use the command line to create and manage a virtual machine</p>
</li>
<li>
<p>Use the web console (cockpit) to create and manage a virtual machine</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started"><a class="anchor" href="#_getting_started"></a>Getting Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For these exercises, you will be using the host <code>bastion</code> as user <code>root</code>.</p>
</div>
<div class="paragraph">
<p>Use <code>sudo</code> to elevate your privileges.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">[[ "$UID" == 0 ]] || sudo -i</code></pre>
</div>
</div>
<div class="paragraph">
<p>Verify that you are on the right host for these exercises.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">workshop-virt-checkhost.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>You are now ready to proceed with these exercises.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_requirements"><a class="anchor" href="#_requirements"></a>Requirements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First we need to ensure the system being used supports either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Intel VT-x and Intel 64 virtualization extensions</p>
</li>
<li>
<p>AMD-V and the AMD64 virtualization extensions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This is done with the following simple commands.</p>
</div>
<div class="paragraph">
<p>You can start by examining the CPU flags (capabilities) advertised by your system.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">grep -E 'svm|vmx' /proc/cpuinfo</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36
clflush mmx fxsr sse sse2 ss syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon rep_good
nopl xtopology cpuid tsc_known_freq pni pclmulqdq <strong>vmx</strong> ssse3 fma cx16 pcid sse4_1 sse4_2
x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm abm 3dnow
prefetch invpcid_single ssbd ibrs ibpb stibp ibrs_enhanced tpr_shadow vnmi flexpriority ept
vpid fsgsbase tsc_adjust bmi1 hle avx2 smep bmi2 erms invpcid rtm mpx avx512f avx512dq rds
eed adx smap clflushopt clwb avx512cd avx512bw avx512vl xsaveopt xsavec xgetbv1 arat pku os
pke avx512_vnni md_clear arch_capabilities</pre>
</div>
</div>
<div class="paragraph">
<p>You are looking for either the Intel flag (vmx) or the AMD flag (svm).  A more sophisticated command makes it a little easier to determine.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">if grep -qE 'svm|vmx' /proc/cpuinfo ; then echo 'Virt Supported' ; else echo 'WARNING: no hardware virtualization support detected'; fi</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Virt Supported</pre>
</div>
</div>
<div class="paragraph">
<p>After you install all the required software, there are some additional tools to provide more detailed reporting on system capabilities.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
It could very well be that your environment does not support
native or nested virutualization.  This does not mean that this exercise
will not work, but it does mean that (if it does work) it will be VERY slow.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation_and_configuration"><a class="anchor" href="#_installation_and_configuration"></a>Installation and Configuration</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Please note that all software has been pre-installed and configured.  These steps are provided as reference material only.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>System needs to be configure with access to the following repos:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>rhel-9-baseos-rpms</p>
</li>
<li>
<p>rhel-9-appstream-rpms</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Install the required packages.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">dnf install -y qemu-kvm libvirt virt-install libvirt-client libguestfs-tools cockpit-machines</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next we need to enable the various services.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">systemctl enable --now libvirtd</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The "enable --now" syntax was introduced in RHEL 8 and allows for permanently enabling as well as immediately starting services in a single command.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Finally check the service status.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">systemctl --no-pager status libvirtd</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_verify_virtualization_host_status"><a class="anchor" href="#_verify_virtualization_host_status"></a>Verify Virtualization Host Status</h3>
<div class="paragraph">
<p>One simple command checks various hardware and software configurations for support of virtualization.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">virt-host-validate</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">  QEMU: Checking for hardware virtualization                                 : PASS
  QEMU: Checking if device /dev/kvm exists                                   : PASS
  QEMU: Checking if device /dev/kvm is accessible                            : PASS
  QEMU: Checking if device /dev/vhost-net exists                             : PASS
  QEMU: Checking if device /dev/net/tun exists                               : PASS
  QEMU: Checking for cgroup 'cpu' controller support                         : PASS
  QEMU: Checking for cgroup 'cpuacct' controller support                     : PASS
  QEMU: Checking for cgroup 'cpuset' controller support                      : PASS
  QEMU: Checking for cgroup 'memory' controller support                      : PASS
  QEMU: Checking for cgroup 'devices' controller support                     : PASS
  QEMU: Checking for cgroup 'blkio' controller support                       : PASS
  QEMU: Checking for device assignment IOMMU support                         : WARN (No ACPI IVRS table found, IOMMU either disabled in BIOS or not supported by this hardware platform)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deploy_a_virtual_machine_with_virt_install"><a class="anchor" href="#_deploy_a_virtual_machine_with_virt_install"></a>Deploy A Virtual-Machine with 'virt-install'</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Red Hat provides pre-made generic images of RHEL for use as virtual machines in a QCOW2 format.</p>
</div>
<div class="paragraph">
<p>However, in order to access them for download one needs to have an active Red Hat Enterprise Linux entitlement.  An alternative to downloading a qcow image is to make one.</p>
</div>
<div class="paragraph">
<p>Fortunately, that&#8217;s precisely what you did in the previous unit with Image Builder.</p>
</div>
<div class="sect2">
<h3 id="_locate_your_qcow_image"><a class="anchor" href="#_locate_your_qcow_image"></a>Locate your QCOW Image</h3>
<div class="paragraph">
<p>In the previous exercise, you built a custom QCOW2 image using Image Builder.  The result of that work should be a vm image named vmguest.qcow2</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">ls /var/lib/libvirt/images</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">vmguest.qcow2</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_customize_your_qcow_image"><a class="anchor" href="#_customize_your_qcow_image"></a>Customize your QCOW Image</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now you need to do a few more things to your image:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>set a hostname</p>
</li>
<li>
<p>set a root password</p>
</li>
<li>
<p>copy a simple HTML file</p>
</li>
<li>
<p>selinux relabel files in the guest</p>
</li>
<li>
<p>remove the cloud-init package</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We will include a timer on this command so you can estimate how long this
will take.  On our AWS reference platform without virt support, this took
about 5 minutes.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">time virt-customize \
    -a /var/lib/libvirt/images/vmguest.qcow2 \
    --hostname vmguest \
    --root-password password:redhat \
    --ssh-inject root:file:/root/.ssh/id_rsa.pub \
    --copy-in /usr/local/etc/index.html:/var/www/html \
    --selinux-relabel \
    --run-command 'echo "PermitRootLogin yes" &gt;&gt; /etc/ssh/sshd_config.d/rootlogin.conf' \
    --uninstall cloud-init</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">[   0.0] Examining the guest ...
[  59.2] Setting a random seed
[  59.6] Setting the machine ID in /etc/machine-id
[  59.6] Setting the hostname: vmguest
[  60.4] Copying: /usr/local/etc/index.html to /var/www/html
[  60.7] Uninstalling packages: cloud-init
[  85.1] Setting passwords
[ 105.1] SELinux relabelling
[ 322.4] Finishing off

real    5m22.948s
user    0m0.037s
sys     0m0.057s</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vm_deployment"><a class="anchor" href="#_vm_deployment"></a>VM Deployment</h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Please note that if your workshop environment did NOT show support for native or nested
virtualization, every step beyond this point will likely take a very long time.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>It is now time to launch the VM</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">virt-install \
   --import \
   --name vmguest \
   --memory 2048 \
   --cpu host \
   --vcpus 1 \
   --disk /var/lib/libvirt/images/vmguest.qcow2 \
   --graphics vnc \
   --noautoconsole\
   --os-variant rhel9.0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Give the VM a few moments to boot.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you explored the web-console exercise, you can use cockpit to
access the VM&#8217;s console and see what&#8217;s going on.  Just be sure you
selected administrative access.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_virtual_machine_connectivity"><a class="anchor" href="#_virtual_machine_connectivity"></a>Virtual Machine Connectivity</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To determine what IP address was assigned to the new host, we can using some options to the virsh utility</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">virsh net-dhcp-leases default</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output will show us the clients MAC address and the IP address it was assigned via the libvirt integrated dnsmasq service.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"> Expiry Time           MAC address         Protocol   IP address          Hostname   Client ID or DUID
-----------------------------------------------------------------------------------------------------------
 2021-11-13 11:19:33   52:54:00:63:85:76   ipv4       192.168.122.62/24   -          01:52:54:00:63:85:76</pre>
</div>
</div>
<div class="paragraph">
<p>Another mechanism determine the ip address of the client is to use the 'domifaddr' option.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">virsh domifaddr vmguest</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap"> Name       MAC address          Protocol     Address
-------------------------------------------------------------------------------
 vnet0      52:54:00:63:85:76    ipv4         192.168.122.62/24</pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Before you proceed, empty data in the above commands is an indication that the virtual machine has
not completed it&#8217;s bootstrap.  Just give it a few more moments and try again.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once we can see the network information, now it is time to connect to the host so</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">export VM_IP=$(virsh domifaddr vmguest | sed -e '1,2d' -e '$d' | awk '{ split($4,a,/\//) ; print a[1] }')</code></pre>
</div>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">curl $VM_IP</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">*** Success !!! It Works  ***</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_virtual_machine_inspection"><a class="anchor" href="#_virtual_machine_inspection"></a>Virtual Machine Inspection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now it is time to connect to the host and check out some it&#8217;s characteristics.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">export VM_IP=$(virsh domifaddr vmguest | sed -e '1,2d' -e '$d' | awk '{ split($4,a,/\//) ; print a[1] }')</code></pre>
</div>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">ssh $VM_IP -o "StrictHostKeyChecking no"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The password was set in the previous exercise with virt-customize command and is probably just 'redhat'.
However, since we injected the ssh key during virt-customize, you should not be prompted for a password.</p>
</div>
<div class="paragraph">
<p>The virtual machine is on a private network and not accessbile from the internet.  You will only
be able to access it from the bastion via ssh, or from the webconsole.</p>
</div>
<div class="paragraph">
<p>Verify that the httpd daemon is running.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">systemctl --no-pager status httpd</code></pre>
</div>
</div>
<div class="paragraph">
<p>Verifiy that the index.html is installed.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">ls /var/www/html/index.html</code></pre>
</div>
</div>
<div class="paragraph">
<p>Exit back to the host</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">exit</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_additional_cli_commands"><a class="anchor" href="#_additional_cli_commands"></a>Additional CLI Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some additional simple virtual machine management commands</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>virsh list</strong> lists running virtual machines</p>
</li>
<li>
<p><strong>virsh list --all</strong> lists all virtual machines regardless of state</p>
</li>
<li>
<p><strong>virsh start &lt;vm-name&gt;</strong> starts a virtual machine named</p>
</li>
<li>
<p><strong>virsh shutdown &lt;vm-name&gt;</strong> performs a soft shutdown of the virtual machine</p>
</li>
<li>
<p><strong>virsh destroy &lt;vm-name&gt;</strong> performs distructive cold stop the virtual machine</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_explore_vm_management_with_web_console"><a class="anchor" href="#_explore_vm_management_with_web_console"></a>Explore VM Management with 'Web-Console'</h2>
<div class="sectionbody">
<div class="paragraph">
<p>From the menu, select the Machines tab.  You will notice that the interface is still pretty rudimentary when compared with the Red Hat Virtualization Manager (RHVM), but one critical feature is available: the console!</p>
</div>
<div class="paragraph">
<p>Take some time to explore the capabilities of the Web-Console Machines webui.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_virtual_machine_shutdown"><a class="anchor" href="#_virtual_machine_shutdown"></a>Virtual Machine Shutdown</h2>
<div class="sectionbody">
<div class="paragraph">
<p>WARN: It is IMPORTANT to shutdown the deployed VMs.  Leaving any VM running in this workshop environment can adversely impact other exercises.</p>
</div>
<div class="paragraph">
<p>Using either the CLI (or the Web-Console), be sure to shutdown the VM(s) you deployed to ensure additional workshop exercises perform reasonably.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">virsh list --all</code></pre>
</div>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">virsh shutdown vmguest</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion"><a class="anchor" href="#_conclusion"></a>Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This concludes the exercises related to virtualization.</p>
</div>
<div class="paragraph">
<p>Time to finish this unit and return the shell to it&#8217;s home position.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">workshop-finish-exercise.sh</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_additional_resources"><a class="anchor" href="#_additional_resources"></a>Additional Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Cockpit Project Page</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://cockpit-project.org/blog/category/release.html">Cockpit Project</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Network Related Topics</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/networking_guide/ch-configure_network_bridging">Configure Network Bridging</a></p>
</li>
<li>
<p><a href="http://blog.leifmadsen.com/blog/2016/12/01/create-network-bridge-with-nmcli-for-libvirt/">Create Network Bridge with nmcli</a></p>
</li>
</ul>
</div>
<h2 id="_end_of_unit" class="discrete">End of Unit</h2>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="image-builder.html" class="query-params-link">Image Builder (composer-cli)</a></span>
  <span class="next"><a href="tlog.html" class="query-params-link">Session Logging (tlog)</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../../_/js/vendor/clipboard.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
