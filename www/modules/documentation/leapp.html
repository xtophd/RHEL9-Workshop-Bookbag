<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Definitive RHEL9 Workshop (v9.1)</title>
    <link rel="prev" href="boom-kernel-parms.html">
    <meta name="generator" content="Antora 3.1.7">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img
          src="../../_/img/header_logo.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" href="../..">Definitive RHEL9 Workshop (v9.1)</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Books</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">CheatSheets</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">CheatSheet A</a>
            <a class="navbar-item" href="#">CheatSheet B</a>
            <a class="navbar-item" href="#">CheatSheet C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Upcoming Events</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Event A</a>
            <a class="navbar-item" href="#">Event B</a>
            <a class="navbar-item" href="#">Event C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Tutorial A</a>
            <a class="navbar-item" href="#">Tutorial B</a>
            <a class="navbar-item" href="#">Tutorial C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="modules" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html" class=" query-params-link">Default Title</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../overview.html">Workshop Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="webconsole.html">Web Console (cockpit)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="systemd.html">Service Management (systemd)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="firewalld.html">Firewall Management (firewalld)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="nftables.html">Firewall Rules (nf-tables)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ebpf.html">eBPF Tracing (bcc-tools)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="podman.html">Containers Management (podman)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="buildah.html">Containers Dev (buildah)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="image-builder.html">Image Builder (composer-cli)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="virtualization.html">Virtualization (kvm,libvirt)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="tlog.html">Session Logging (tlog)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="lvm-vdo.html">Data Optimization (lvm,vdo)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="stratis.html">Storage Management (stratis)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="kpatch.html">Kernel Live Patching (kpatch)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="boom-kernel-parms.html">Managing GRUB2 with Boom</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="leapp.html">LEAPP In-Place Upgrades</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Default Title</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Default Title</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../connection.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Default Title</a></li>
    <li><a href="leapp.html">LEAPP In-Place Upgrades</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///Users/jmaltin/Development/RHEL9-Workshop-Showroom/content/modules/ROOT/pages/documentation/leapp.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<div class="sect1">
<h2 id="_upgrading_from_rhel_8_to_rhel_9"><a class="anchor" href="#_upgrading_from_rhel_8_to_rhel_9"></a>Upgrading from RHEL 8 to RHEL 9</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a>Overview</h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This exercise requires the SECONDARY terminal and conflicts with any other exercise that
uses the secondary terminal.  Do not proceed if the secondary terminal is already in use with another exercise.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In this unit, we will get familiar with the upgrade tool called LEAPP.  LEAPP is a tool used to analyze an
existing system and report on potential issues that could or would cause issues preventing an in-place
upgrade, and once issues are addressed then perform the upgrade itself.</p>
</div>
<div class="paragraph">
<p>Because the upgrade process is VERY time consuming lengthy process, this exercise uses the seconday terminal.
The intent is to dedicate secondary terminal to the leapp upgrade, there-by leaving the primary terminal available
for other exercises while the upgrade executes.</p>
</div>
<div class="paragraph">
<p>The first several sections leading up to the actual upgrade are interactive and should take around 7 - 8 minutes to complete.  The sections which perform the actual upgrade and finalize it are almost completely non-interactive and each are expected to take 6 - 9 minutes to complete.  Once you start them, you will have time to look at other exercises in the PRIMARY terminal while waiting for them to complete.</p>
</div>
<div class="paragraph">
<p>To help you set up your second terminal (if you haven&#8217;t connected to the bastion host already), here
is the ssh command and password which you can use.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">[[ $(hostname -s) != "bastion" ]] &amp;&amp; sample_ssh_command -o "StrictHostKeyChecking no"</code></pre>
</div>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">sample_ssh_password</code></pre>
</div>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">workshop-tmux.sh TERM2</code></pre>
</div>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">[[ "$UID" == 0 ]] || sudo -i</code></pre>
</div>
</div>
<div class="paragraph">
<p>You are now ready to proceed with these exercises.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started"><a class="anchor" href="#_getting_started"></a>Getting Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For these exercises, you will be using the host <code>leapp</code> as user <code>root</code>.  Before you begin, confirm the node was provisioned with RHEL 8.6</p>
</div>
<div class="paragraph">
<p>From host <code>bastion</code>, ssh to <code>leapp</code>.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">ssh leapp</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use <code>sudo</code> to elevate your privileges.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">[[ "$UID" == 0 ]] || sudo -i</code></pre>
</div>
</div>
<div class="paragraph">
<p>Verify that you are on the right host for these exercises.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">workshop-leapp-checkhost.sh</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_current_rhel_version_verification"><a class="anchor" href="#_current_rhel_version_verification"></a>Current RHEL Version Verification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Verify through a few commands that this is currently running RHEL8.  These will show the current version of RHEL, the version of the running kernel and the rpm repos available to the system.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">cat /etc/redhat-release</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Red Hat Enterprise Linux release 8.6 (Ootpa)</pre>
</div>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">uname -r</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">4.18.0-372.32.1.el8_6.x86_64</pre>
</div>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">dnf repolist</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Updating Subscription Management repositories.
repo id                                    repo name
rhel-8-for-x86_64-appstream-rpms           Red Hat Enterprise Linux 8 for x86_64 - AppStream (RPMs)
rhel-8-for-x86_64-baseos-rpms              Red Hat Enterprise Linux 8 for x86_64 - BaseOS (RPMs)
rhel-8-for-x86_64-supplementary-rpms       Red Hat Enterprise Linux 8 for x86_64 - Supplementary (RPMs)----</pre>
</div>
</div>
<div class="paragraph">
<p>You are now ready to proceed with the exercises.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_host_preparation"><a class="anchor" href="#_host_preparation"></a>Host Preparation</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The steps listed here are for reference outside of this workshop only.  None of these steps need to be performed for the exercise to function.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_package_repositories"><a class="anchor" href="#_package_repositories"></a>Package Repositories</h3>
<div class="paragraph">
<p>First item of business is to ensure the proper software repositories are enabled on the host.  In our workshop environment, the leapp host was likely provisioned with a RHEL 8.x ISO image and configured with local static self-managed repos.</p>
</div>
<div class="paragraph">
<p>If necessary, begin by disabling any local static repos and switching to the latest managed ones from Red Hat.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
You can probably skip this step if you are connected to a Satellite or directly to redhat.com.
</td>
</tr>
</table>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">dnf config-manager --set-disabled my-rhel-8-server-rpm-repo</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, register the host and attach an entitlement.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">subscription-manager register --auto-attach</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, enable all of the correct software repositories.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">subscription-manager repos --disable=*</code></pre>
</div>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">subscription-manager repos --enable=rhel-8-for-x86_64-baseos-rpms --enable=rhel-8-for-x86_64-appstream-rpms</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensure that Red Hat Subscription Manager is set to consume the latest RHEL 8.6 content.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">subscription-manager release</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Release: 8.6</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation"><a class="anchor" href="#_installation"></a>Installation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_tools"><a class="anchor" href="#_tools"></a>Tools</h3>
<div class="paragraph">
<p>Install the LEAPP tools and any dependencies</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">dnf install -y leapp-upgrade</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cleanup"><a class="anchor" href="#_cleanup"></a>Cleanup</h3>
<div class="paragraph">
<p>Delete any results from any possible previous attempts to run leapp</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">rm -rf /root/tmp_leapp_py3</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_data_file_disconnected_upgrades"><a class="anchor" href="#_data_file_disconnected_upgrades"></a>Data File (disconnected upgrades)</h3>
<div class="paragraph">
<p>There are several files needed to complete the upgrade that are available online, which are not accessible if the system is not able to access the internet or is not registerd (see link at bottom of exercise).  For this workshop, the following command will put them where they need to go:</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">cd /etc/leapp/files</code></pre>
</div>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">tar -xzvf /usr/local/src/leapp-data17.tar.gz</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pre_upgrade"><a class="anchor" href="#_pre_upgrade"></a>Pre-Upgrade</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_scan"><a class="anchor" href="#_scan"></a>Scan</h3>
<div class="paragraph">
<p>Now run the preupgrade option to generate a preliminary report to see if there are any issues found that could prevent the upgrade from proceeding smoothly.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">leapp preupgrade</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_report"><a class="anchor" href="#_report"></a>Report</h3>
<div class="paragraph">
<p>The output from the previous command should have listed a few items that are inhibiting the upgrade of the host.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">=================================================
                     UPGRADE INHIBITED
=================================================

Debug output written to /var/log/leapp/leapp-preupgrade.log

=================================================
                           REPORT
=================================================

A report has been generated at /var/log/leapp/leapp-report.json
A report has been generated at /var/log/leapp/leapp-report.txt

=================================================
                       END OF REPORT
=================================================

Answerfile has been generated at /var/log/leapp/answerfile</pre>
</div>
</div>
<div class="paragraph">
<p>Notice that the output refers you to the pre-upgrade report for details and remediations.  If your system has the cockpit-leapp package installed, you can switch to using a web-broswer to step through each item and inspect the remediation options.</p>
</div>
<div class="paragraph">
<p>Look at the first several lines of the report mentioned above, /var/log/leapp/leapp-report.txt</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">head /var/log/leapp/leapp-report.txt</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first two lines indicate a Risk Factor, in this case high/inhibitor meaning that this issue will prevent the upgrade from proceeding.  Followed by a Summary of the issue:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Summary: Firewalld has enabled configuration option "AllowZoneDrifiting" which has been removed in RHEL-9. New behavior is as if "AllowZoneDrifiting" was set to "no".</pre>
</div>
</div>
<div class="paragraph">
<p>This tells us that there is a Firewalld configuration that was allowed in RHEL8 that is no longer allowed in RHEL9.  The next line tells us a "hint" at how to remediate the issue so that the upgrade can proceed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Remediation: [hint] Set AllowZoneDrifting=no in /etc/firewalld/firewalld.conf</pre>
</div>
</div>
<div class="paragraph">
<p>And the following line gives an actual command that can be used to make the change without having to edit the file directly:</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_remediate"><a class="anchor" href="#_remediate"></a>Remediate</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using the recommendation from the pre-upgrade results, let&#8217;s fix the blocker.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">sed -i "s/^AllowZoneDrifting=.*/AllowZoneDrifting=no/" /etc/firewalld/firewalld.conf</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now re-run the preupgrade. This time there should be no inhibitors</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">leapp preupgrade</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output to come back clean without any inhibitors that would prevent a successful upgrade.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">=================================================
                           REPORT
=================================================

A report has been generated at /var/log/leapp/leapp-report.json
A report has been generated at /var/log/leapp/leapp-report.txt

=================================================
                       END OF REPORT
=================================================

Answerfile has been generated at /var/log/leapp/answerfile</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_upgrade"><a class="anchor" href="#_upgrade"></a>Upgrade</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Everything should be ready to run the upgrade.  This will install several rpms, make some repo and other configuration changes, and will take several minutes (6 to 10 in our vm testing).</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">time leapp upgrade</code></pre>
</div>
</div>
<div class="paragraph">
<p>After several minutes you should see an almost identical report output indicating that phase one of the upgrade has completed</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">=================================================
                           REPORT
=================================================

A report has been generated at /var/log/leapp/leapp-report.json
A report has been generated at /var/log/leapp/leapp-report.txt

=================================================
                       END OF REPORT
=================================================

Answerfile has been generated at /var/log/leapp/answerfile

real    5m51.542s
user    4m30.154s
sys     1m10.384s</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_finalize_the_upgrade"><a class="anchor" href="#_finalize_the_upgrade"></a>Finalize the Upgrade</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To finish the upgrade process, a reboot is now required.  Without console access you won&#8217;t be able to see the final
and unfortunately this is the step that takes the longest.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">[[ $(hostname -s) == "leapp" ]] &amp;&amp; reboot</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Connection to leapp closed by remote host.
Connection to leapp closed.</pre>
</div>
</div>
<div class="paragraph">
<p>After another 6 - 9 minutes, you should be able to ssh back in from the bastion host</p>
</div>
<div class="paragraph">
<p>Here is a command you can run on the bastion to loop until the leapp host is
back online</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">time until $( nc -z leapp 22 ) ; do echo -n "." ; sleep 3 ; done</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Do not proceed until the leapp upgrade process is complete
</td>
</tr>
</table>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">ssh leapp</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use <code>sudo</code> to elevate your privileges.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">[[ "$UID" == 0 ]] || sudo -i</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_final_rhel_version_verification"><a class="anchor" href="#_final_rhel_version_verification"></a>Final RHEL Version Verification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Finally, re-run the commands from earlier to verify that the leapp node has actually been upgraded to RHEL9</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">cat /etc/redhat-release</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Red Hat Enterprise Linux release 9.0 (Plow)</pre>
</div>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">uname -r</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">5.14.0-70.17.1.el9_0.x86_64</pre>
</div>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">dnf repolist</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Updating Subscription Management repositories.
repo id                                    repo name
rhel-9-for-x86_64-appstream-rpms           Red Hat Enterprise Linux 9 for x86_64 - AppStream (RPMs)
rhel-9-for-x86_64-baseos-rpms              Red Hat Enterprise Linux 9 for x86_64 - BaseOS (RPMs)
rhel-9-for-x86_64-supplementary-rpms       Red Hat Enterprise Linux 9 for x86_64 - Supplementary (RPMs)</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_a_word_about_web_console_integration"><a class="anchor" href="#_a_word_about_web_console_integration"></a>A Word About Web Console Integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This exercise has illustrated a very simple example of upgrading a RHEL8 system in place to a RHEL9 system, with a single issue that was easy to remediate and no applications running on top of the OS.  In the real world, there are likely to be more issues that need to be addressed and in some cases there are known issues that will prevent an in place upgrade (see official Red Hat documentation link below).  There is a Web Console plugin that makes it easier to visualize and in many cases remediate upgrade inhibitors that arise.  The rpm is called "cockpit-leapp" and once installed will enable visualization like this</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="imageblock">
<div class="content">
<img src="../_images/leapp-weboconsole-sample.png" alt="Sample Leapp PreUpgrade Web Console Report">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion"><a class="anchor" href="#_conclusion"></a>Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Whether upgrading in place is right is a decision that needs to be made from one environment to the next, one group to the next, even from one system to the next.  What makes sense for one application might not make sense for another.  As with any OS upgrade, test in the lab and do backups!</p>
</div>
<div class="paragraph">
<p>Time to finish this unit and return the shell to it&#8217;s home position.</p>
</div>
<div class="listingblock copy">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-none hljs">workshop-finish-exercise.sh</code></pre>
</div>
</div>
<h2 id="_additional_reference_materials" class="discrete">Additional Reference Materials</h2>
<div class="ulist">
<ul>
<li>
<p><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/upgrading_from_rhel_8_to_rhel_9/index">Uprading from RHEL 8 to RHEL 9</a></p>
</li>
<li>
<p><a href="https://access.redhat.com/articles/3664871">Data required by the Leapp utility for a disconnected RHEL in-place upgrade</a></p>
</li>
</ul>
</div>
<h2 id="_end_of_unit" class="discrete">End of Unit</h2>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="boom-kernel-parms.html" class="query-params-link">Managing GRUB2 with Boom</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../../_/js/vendor/clipboard.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
